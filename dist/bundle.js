!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.Annotation=n():t.Annotation=n()}(self,(()=>(()=>{"use strict";var t={523:(t,n,e)=>{e.d(n,{A:()=>r});var o=e(601),a=e.n(o),p=e(314),i=e.n(p)()(a());i.push([t.id,".cdx-annotation {\n  background: rgb(192 192 192 / 30%);\n  padding: 2px 3px;\n  border: 1px solid rgb(201 201 201 / 30%);\n  border-radius: 3px;\n  font-size: .98em;\n}\n\n.cdx-annotation_popup {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  z-index: 10;\n  padding: 10px;\n  transition: opacity .5s;\n}\n\n.cdx-annotation_popup.hidden {\n  pointer-events: none;\n  opacity: 0;\n}\n\n.cdx-annotation_popup-overlay {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  background-color: rgb(0 0 0 / 50%);\n  cursor: pointer;\n}\n\n.cdx-annotation_popup-form {\n  display: flex;\n  flex-direction: column;\n\n  width: 100%;\n  max-width: 450px;\n  height: auto;\n  max-height: 100%;\n\n  z-index: 20;\n  background-color: white;\n  border: 1px solid #e8e8eb;\n  border-radius: 6px;\n  box-shadow: 0 3px 15px -3px rgba(13, 20, 33, .13);\n}\n\n.cdx-annotation_popup-header {\n  display: flex;\n  padding: 10px 16px;\n  border-bottom: 1px solid #e8e8eb;\n}\n\n.cdx-annotation_popup-title {\n  font-size: 16px;\n  font-weight: 500;\n  margin-right: auto;\n}\n\n.cdx-annotation_popup-btn-close {\n  margin: -10px -16px;\n  border: 0;\n  background-color: transparent;\n  padding: 0;\n  width: 44px;\n  height: 44px;\n}\n\n.cdx-annotation_popup-btn-close svg {\n  width: 26px;\n}\n\n.cdx-annotation_popup-content {\n  padding: 10px 12px;\n  overflow-y: auto;\n  max-height: 400px;\n}\n\n.cdx-annotation_popup-inp-title {\n  margin-bottom: 10px;\n}\n\n.cdx-annotation_popup-inp-text {\n  resize: vertical;\n  max-height: 300px;\n}\n\n.cdx-annotation_popup-footer {\n  display: flex;\n  padding: 10px 16px;\n  border-top: 1px solid #e8e8eb;\n}\n\n.cdx-annotation_popup-footer .cdx-button {\n  padding: 6px 13px;\n  transition: background-color .2s;\n}\n\n.cdx-annotation_popup-btn-remove {\n  color: #e96a6a;\n  border-color: #e96a6a;\n}\n\n.cdx-annotation_popup-btn-remove:hover {\n  background-color: #fff4f4;\n}\n\n.cdx-annotation_popup-btn-save {\n  color: #46a946;\n  border-color: #46a946;\n  margin-left: auto;\n}\n\n.cdx-annotation_popup-btn-save:hover {\n  background-color: #f2fff2;\n}\n\n.cdx-annotation_btn-edit {\n  display: none;\n  align-items: center;\n  justify-content: left;\n  font-size: 13px;\n  gap: 6px;\n  width: 100%;\n  border: 0;\n  background-color: transparent;\n  padding: 5px 8px;\n  border-top: 1px solid rgba(201, 201, 204, .48);\n  transition: background-color .2s;\n}\n\n.cdx-annotation_btn-edit:hover {\n  background-color: rgb(0 0 0 / 5%);\n}\n\n.cdx-annotation_btn-edit.show {\n  display: flex;\n}",""]);const r=i},314:t=>{t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e="",o=void 0!==n[5];return n[4]&&(e+="@supports (".concat(n[4],") {")),n[2]&&(e+="@media ".concat(n[2]," {")),o&&(e+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),e+=t(n),o&&(e+="}"),n[2]&&(e+="}"),n[4]&&(e+="}"),e})).join("")},n.i=function(t,e,o,a,p){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(o)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(i[s]=!0)}for(var d=0;d<t.length;d++){var l=[].concat(t[d]);o&&i[l[0]]||(void 0!==p&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=p),e&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=e):l[2]=e),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),n.push(l))}},n}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var n=[];function e(t){for(var e=-1,o=0;o<n.length;o++)if(n[o].identifier===t){e=o;break}return e}function o(t,o){for(var p={},i=[],r=0;r<t.length;r++){var s=t[r],d=o.base?s[0]+o.base:s[0],l=p[d]||0,c="".concat(d," ").concat(l);p[d]=l+1;var u=e(c),h={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==u)n[u].references++,n[u].updater(h);else{var x=a(h,o);o.byIndex=r,n.splice(r,0,{identifier:c,updater:x,references:1})}i.push(c)}return i}function a(t,n){var e=n.domAPI(n);return e.update(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap&&n.supports===t.supports&&n.layer===t.layer)return;e.update(t=n)}else e.remove()}}t.exports=function(t,a){var p=o(t=t||[],a=a||{});return function(t){t=t||[];for(var i=0;i<p.length;i++){var r=e(p[i]);n[r].references--}for(var s=o(t,a),d=0;d<p.length;d++){var l=e(p[d]);0===n[l].references&&(n[l].updater(),n.splice(l,1))}p=s}}},659:t=>{var n={};t.exports=function(t,e){var o=function(t){if(void 0===n[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}},540:t=>{t.exports=function(t){var n=document.createElement("style");return t.setAttributes(n,t.attributes),t.insert(n,t.options),n}},56:(t,n,e)=>{t.exports=function(t){var n=e.nc;n&&t.setAttribute("nonce",n)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=t.insertStyleElement(t);return{update:function(e){!function(t,n,e){var o="";e.supports&&(o+="@supports (".concat(e.supports,") {")),e.media&&(o+="@media ".concat(e.media," {"));var a=void 0!==e.layer;a&&(o+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),o+=e.css,a&&(o+="}"),e.media&&(o+="}"),e.supports&&(o+="}");var p=e.sourceMap;p&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(p))))," */")),n.styleTagTransform(o,t,n.options)}(n,t,e)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)}}}},113:t=>{t.exports=function(t,n){if(n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}}},n={};function e(o){var a=n[o];if(void 0!==a)return a.exports;var p=n[o]={id:o,exports:{}};return t[o](p,p.exports,e),p.exports}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e.nc=void 0;var o={};e.d(o,{default:()=>g});var a=e(72),p=e.n(a),i=e(825),r=e.n(i),s=e(659),d=e.n(s),l=e(56),c=e.n(l),u=e(540),h=e.n(u),x=e(113),m=e.n(x),v=e(523),f={};f.styleTagTransform=m(),f.setAttributes=c(),f.insert=d().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=h(),p()(v.A,f),v.A&&v.A.locals&&v.A.locals;class g{static get isInline(){return!0}constructor({api:t}){this.api=t,this.tag="SPAN",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}static currentRange=null;static currentElem=null;static get CSS(){return{baseClass:"cdx-annotation",popupClass:"cdx-annotation_popup",popupHidden:"hidden",popupOverlay:"cdx-annotation_popup-overlay",popupForm:"cdx-annotation_popup-form",popupHeader:"cdx-annotation_popup-header",popupTitle:"cdx-annotation_popup-title",popupCloseButton:"cdx-annotation_popup-btn-close",popupContent:"cdx-annotation_popup-content",popupInputTitle:"cdx-annotation_popup-inp-title",popupInputText:"cdx-annotation_popup-inp-text",popupFooter:"cdx-annotation_popup-footer",popupSaveButton:"cdx-annotation_popup-btn-save",popupRemoveButton:"cdx-annotation_popup-btn-remove"}}getPopup(){let t=document.querySelector(`body > .${g.CSS.popupClass}`);if(!t){t=document.createElement("div"),t.classList.add(g.CSS.popupClass,g.CSS.popupHidden);let n=document.createElement("div");n.classList.add(g.CSS.popupOverlay),n.addEventListener("click",(()=>{this.closePopup()}));let e=document.createElement("div");e.classList.add(g.CSS.popupForm);let o=document.createElement("div");o.classList.add(g.CSS.popupHeader);let a=document.createElement("div");a.classList.add(g.CSS.popupTitle),a.innerText=this.api.i18n.t("Edit annotation");let p=document.createElement("button");p.classList.add(g.CSS.popupCloseButton),p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="40" viewBox="0 -960 960 960" width="40"><path d="m251.333-204.667-46.666-46.666L433.334-480 204.667-708.667l46.666-46.666L480-526.666l228.667-228.667 46.666 46.666L526.666-480l228.667 228.667-46.666 46.666L480-433.334 251.333-204.667Z"/></svg>',p.addEventListener("click",(()=>{this.closePopup()})),o.appendChild(a),o.appendChild(p);let i=document.createElement("div");i.classList.add(g.CSS.popupContent);let r=document.createElement("input");r.classList.add(this.api.styles.input,g.CSS.popupInputTitle),r.placeholder=this.api.i18n.t("Annotation title");let s=document.createElement("textarea");s.classList.add(this.api.styles.input,g.CSS.popupInputText),s.placeholder=this.api.i18n.t("Annotation text"),i.appendChild(r),i.appendChild(s);let d=document.createElement("div");d.classList.add(g.CSS.popupFooter);let l=document.createElement("button");l.classList.add(this.api.styles.button,g.CSS.popupRemoveButton),l.innerText=this.api.i18n.t("Remove"),l.addEventListener("click",(()=>{g.currentElem&&this.unwrap(g.currentElem),this.closePopup()}));let c=document.createElement("button");c.classList.add(this.api.styles.button,g.CSS.popupSaveButton),c.innerText=this.api.i18n.t("Save"),c.addEventListener("click",(()=>{this.saveData(r.value,s.value),this.closePopup()})),d.appendChild(l),d.appendChild(c),e.appendChild(o),e.appendChild(i),e.appendChild(d),t.appendChild(n),t.appendChild(e),document.body.appendChild(t)}return t}openPopup(t,n){let e=this.getPopup(),o=e.querySelector(`.${g.CSS.popupInputTitle}`);o&&(o.value=t||null);let a=e.querySelector(`.${g.CSS.popupInputText}`);a&&(a.value=n||null);let p=e.querySelector(`.${g.CSS.popupRemoveButton}`);p&&(g.currentElem?p.style.display=null:p.style.display="none"),e.classList.remove(g.CSS.popupHidden)}closePopup(){this.getPopup().classList.add(g.CSS.popupHidden),g.currentRange=null,g.currentElem=null,this.api.inlineToolbar.close()}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="20" viewBox="0 -960 960 960" width="20"><path d="M480-144v-85l212-212 85 85-212 212h-85ZM144-348v-72h288v72H144Zm661-36-85-85 32-32q11-11 25.5-11t25.5 11l34 34q11 11 11 25.5T837-416l-32 32ZM144-498v-72h432v72H144Zm0-150v-72h432v72H144Z"/></svg>',isActive:()=>!!this.api.selection.findParentTag(this.tag,g.CSS.baseClass)}}surround(t){if(!t)return;let n=this.api.selection.findParentTag(this.tag,g.CSS.baseClass);n?(g.currentRange=null,g.currentElem=n,this.openPopup(n.getAttribute("data-title"),n.getAttribute("data-text"))):(g.currentRange=t.cloneRange(),g.currentElem=null,this.openPopup(g.currentRange.toString().trim()))}wrap(t,n,e){let o=document.createElement(this.tag);o.classList.add(g.CSS.baseClass),n&&o.setAttribute("data-title",n),e&&o.setAttribute("data-text",e),o.appendChild(t.extractContents()),t.insertNode(o),this.api.selection.expandToTag(o)}saveData(t,n){t=t.trim(),n=n.trim(),0===t.length&&0===n.length||(g.currentRange?this.wrap(g.currentRange,t,n):g.currentElem&&(t?g.currentElem.setAttribute("data-title",t):g.currentElem.removeAttribute("data-title"),n?g.currentElem.setAttribute("data-text",n):g.currentElem.removeAttribute("data-text")),g.currentRange=null,g.currentElem=null)}unwrap(t){this.api.selection.expandToTag(t);let n=window.getSelection(),e=n.getRangeAt(0),o=e.extractContents();t.parentNode.removeChild(t),e.insertNode(o),n.removeAllRanges(),n.addRange(e)}static get sanitize(){return{span:{class:g.CSS.baseClass,"data-title":!0,"data-text":!0}}}}return o.default})()));